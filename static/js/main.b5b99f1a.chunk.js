(this["webpackJsonpinnowise-lab-internship-level-2-mini-paint"]=this["webpackJsonpinnowise-lab-internship-level-2-mini-paint"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a,r=n(19),c=n.n(r),i=n(6),o=(n(44),n(45),n(31)),s=n(3),u=n(34);!function(e){e.SIGNIN="/signin",e.REGISTER="/register",e.GALLERY="/",e.PAINT="/paint"}(a||(a={}));var l=n(2);var b=Object(i.b)((function(e){return{user:e.authReducer.user}}))((function(e){var t=e.user,n=e.component,r=Object(u.a)(e,["user","component"]);return Object(l.jsx)(o.b,Object(s.a)(Object(s.a)({},r),{},{render:function(e){return t?Object(l.jsx)(n,Object(s.a)({},e)):Object(l.jsx)(o.a,{to:a.SIGNIN})}}))})),j=n(18),d=(n(48),n(1)),O=n.n(d);n(49);function f(e){var t=e.onSubmit,n=e.onChange,a=e.children;return Object(l.jsxs)("form",{className:"form",onSubmit:t,children:[Object(l.jsx)("input",{className:"form__email",type:"email",name:"email",placeholder:"email",onChange:n,required:!0}),Object(l.jsx)("input",{className:"form__password",type:"password",name:"password",placeholder:"password",onChange:n,required:!0}),a]})}var m=O.a.memo(f);n(50);function h(e){var t=e.value;return Object(l.jsx)("input",{className:"form-btn",type:"submit",value:t})}var p=O.a.memo(h);n(51);function v(e){var t=e.value,n=e.onClick;return Object(l.jsx)("button",{className:"modal-btn",onClick:n,children:t})}var S=O.a.memo(v);n(52);function g(e){var t=e.children,n=e.text,a=e.value,r=e.onClick;return Object(l.jsxs)("div",{className:"modal",children:[t,Object(l.jsxs)("div",{className:"modal__footer",children:[Object(l.jsx)("span",{className:"modal__text",children:n}),Object(l.jsx)(S,{value:a,onClick:r})]})]})}var E,x=O.a.memo(g);!function(e){e.SIGNOUT="SIGNOUT",e.REQUEST="REQUEST",e.SUCCESS="SUCCESS",e.ERROR="ERROR"}(E||(E={}));var R=n(13),T=Object(R.a)(),C=n(32),I=(n(53),n(55),C.a.initializeApp({apiKey:"AIzaSyCAwELykffctQvVVslcPPXxa6gCbKD5znU",authDomain:"mini-paint-58a48.firebaseapp.com",databaseURL:"https://mini-paint-58a48-default-rtdb.firebaseio.com",projectId:"mini-paint-58a48",storageBucket:"mini-paint-58a48.appspot.com",messagingSenderId:"394339851119",appId:"1:394339851119:web:1dd455169d2dcde511269a"})),w=I.database(),_=I.auth(),N={signin:function(e,t){return _.signInWithEmailAndPassword(e,t)},register:function(e,t){return _.createUserWithEmailAndPassword(e,t)},signout:function(){return _.signOut()}};var A,y=n(7),L={signin:function(e,t){return function(n){n(P()),N.signin(e,t).then((function(e){var t=e.user;if(t){var r=t.uid,c=t.email;n(k({uid:r,email:c||"unknowk"})),T.push(a.GALLERY)}})).catch((function(e){var t=e.message;n(B()),y.b.isActive(A)||(A=y.b.error(t,{position:y.b.POSITION.TOP_CENTER}))}))}},register:function(e,t){return function(n){n(P()),N.register(e,t).then((function(e){var t=e.user;if(t){var r=t.uid,c=t.email;n(k({uid:r,email:c||"unknowk"})),T.push(a.GALLERY)}})).catch((function(e){var t=e.message;n(B()),y.b.isActive(A)||(A=y.b.error(t,{position:y.b.POSITION.TOP_CENTER}))}))}},signout:function(){return function(e){N.signout().then((function(){e({type:E.SIGNOUT})}))}}};function P(){return{type:E.REQUEST}}function k(e){return{type:E.SUCCESS,payload:e}}function B(){return{type:E.ERROR}}y.b.configure();n(58),n(59);var G=function(){return Object(l.jsx)("div",{className:"loader",children:"Loading..."})};function H(e){var t=e.loading,n=Object(d.useState)(""),r=Object(j.a)(n,2),c=r[0],o=r[1],s=Object(d.useState)(""),u=Object(j.a)(s,2),b=u[0],O=u[1],f=Object(i.c)(),h=Object(d.useCallback)((function(e){var t=e.target,n=t.name,a=t.value;"email"===n?o(a):"password"===n&&O(a)}),[]),v=Object(d.useCallback)((function(e){e.preventDefault(),f(L.signin(c,b))}),[c,b,f]),S=Object(d.useCallback)((function(){T.push(a.REGISTER)}),[]);return Object(l.jsxs)("div",{className:"signin",children:[t&&Object(l.jsx)(G,{}),Object(l.jsx)(y.a,{}),Object(l.jsx)(x,{text:"Need an account?",value:"register",onClick:S,children:Object(l.jsx)(m,{onChange:h,onSubmit:v,children:Object(l.jsx)(p,{value:"sign in"})})})]})}y.b.configure();var D=Object(i.b)((function(e){return{loading:e.authReducer.loading}}))(O.a.memo(H));n(60);function z(e){var t=e.loading,n=Object(d.useState)(""),r=Object(j.a)(n,2),c=r[0],o=r[1],s=Object(d.useState)(""),u=Object(j.a)(s,2),b=u[0],O=u[1],f=Object(d.useState)(""),h=Object(j.a)(f,2),v=h[0],S=h[1],g=Object(d.useRef)(""),E=Object(i.c)(),R=Object(d.useCallback)((function(e){var t=e.target,n=t.name,a=t.value;"email"===n?o(a):"password"===n?O(a):"confirmation"===n&&S(a)}),[]),C=Object(d.useCallback)((function(e){e.preventDefault(),b===v?E(L.register(c,b)):y.b.isActive(g.current)||y.b.error("Passwords do not match",{position:y.b.POSITION.TOP_CENTER})}),[c,b,v,E]);return Object(l.jsxs)("div",{className:"register",children:[t&&Object(l.jsx)(G,{}),Object(l.jsx)(y.a,{}),Object(l.jsx)(x,{text:"Already have an account?",value:"sign in",onClick:function(){T.push(a.SIGNIN)},children:Object(l.jsxs)(m,{onChange:R,onSubmit:C,children:[Object(l.jsx)("input",{className:"confirmation",type:"password",name:"confirmation",placeholder:"confirm password",onChange:R}),Object(l.jsx)(p,{value:"register"})]})})]})}y.b.configure();var M=Object(i.b)((function(e){return{loading:e.authReducer.loading}}))(O.a.memo(z)),U=(n(61),n(9)),W=n.n(U),X=n(16);n(63);function Z(e){var t=e.tool,n=e.isShowedSizeBar,a=e.name,r=e.children,c=e.isShowedShapeBar,i=e.onClick,o=Object(d.useMemo)((function(){var e="paint-btn";return(a===t||"size-bar"===a&&n||"shape-bar"===a&&c)&&(e+=" active"),e}),[a,t,c,n]);return Object(l.jsx)("button",{type:"button",className:o,name:a,onClick:i,children:r})}var Y=Object(i.b)((function(e){var t=e.drawReducer;return{tool:t.tool,isShowedSizeBar:t.isShowedSizeBar,isShowedShapeBar:t.isShowedShapeBar}}))(O.a.memo(Z)),K=(n(64),n.p+"static/media/picture.082f3262.svg"),F=n.p+"static/media/logout.58dee8cf.svg";function Q(){var e=Object(i.c)(),t=Object(d.useCallback)((function(){e(L.signout())}),[e]);return Object(l.jsx)(Y,{onClick:t,children:Object(l.jsx)("img",{src:F,alt:""})})}var q,J=O.a.memo(Q);!function(e){e.NO_TOOL="NO_TOOL",e.PAINTBRUSH="PAINTBRUSH",e.LINE="LINE",e.RECTANGLE="RECTANGLE",e.CIRCLE="CIRCLE",e.STAR="STAR",e.HEXAGON="HEXAGON",e.START_DRAW="STARTDRAW",e.STOP_DRAW="STOP_DRAW",e.SET_COLOR="SET_COLOR",e.SHOW_SIZE_BAR="SHOW_SIZE_BAR",e.HIDE_SIZE_BAR="HIDE_SIZE_BAR",e.SET_SIZE="SET_SIZE",e.SHOW_SHAPE_BAR="SHOW_SHAPE_BAR",e.HIDE_SHAPE_BAR="HIDE_SHAPE_BAR",e.SET_IMG="SET_IMG",e.DELETE_IMG="DELETE_IMG",e.SET_CONTEXT="SET_CONTEXT",e.CLEAR="CLEAR"}(q||(q={}));var V={noTool:function(){return{type:q.NO_TOOL}},paintbrush:function(){return{type:q.PAINTBRUSH}},startDraw:function(){return{type:q.START_DRAW}},stopDraw:function(){return{type:q.STOP_DRAW}},setColor:function(e){return{type:q.SET_COLOR,payload:e}},showSizeBar:function(){return{type:q.SHOW_SIZE_BAR}},hideSizeBar:function(){return{type:q.HIDE_SIZE_BAR}},setSize:function(e){return{type:q.SET_SIZE,payload:e}},showShapeBar:function(){return{type:q.SHOW_SHAPE_BAR}},hideShapeBar:function(){return{type:q.HIDE_SHAPE_BAR}},line:function(){return{type:q.LINE}},rectangle:function(){return{type:q.RECTANGLE}},circle:function(){return{type:q.CIRCLE}},star:function(){return{type:q.STAR}},hexagon:function(){return{type:q.HEXAGON}},setImg:function(e){return{type:q.SET_IMG,payload:e}},deleteImg:function(){return{type:q.DELETE_IMG}},setContext:function(e){return{type:q.SET_CONTEXT,payload:e}},clear:function(){return{type:q.CLEAR}}};function $(e){var t=e.dispatch,n=(e.img,Object(d.useCallback)(Object(X.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(V.deleteImg()),t(V.clear()),T.push(a.GALLERY);case 3:case"end":return e.stop()}}),e)}))),[t]));return Object(l.jsxs)("ul",{className:"navbar",children:[Object(l.jsx)("li",{className:"navbar__item",children:Object(l.jsx)(J,{})}),Object(l.jsx)("li",{className:"navbar__item",children:Object(l.jsx)(Y,{onClick:n,children:Object(l.jsx)("img",{src:K,alt:""})})})]})}var ee=Object(i.b)((function(e){var t=e.drawReducer,n=t.img;return{dispatch:t.dispatch,img:n}}))(O.a.memo($));n(65);function te(e){var t=e.dispatch,n=e.color;return Object(l.jsx)("input",{className:"color-input",value:n,type:"color",name:"color",onChange:function(e){var n=e.target.value;t(V.setColor(n))}})}var ne=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,color:t.color}}))(O.a.memo(te)),ae=n.p+"static/media/pencil.d161d2e9.svg";function re(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.PAINTBRUSH?t(V.noTool()):t(V.paintbrush())}),[t,n]);return Object(l.jsx)(Y,{name:q.PAINTBRUSH,onClick:a,children:Object(l.jsx)("img",{src:ae,alt:""})})}var ce=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(re)),ie=n.p+"static/media/circle.dddf140d.svg";function oe(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.CIRCLE?t(V.noTool()):t(V.circle())}),[n,t]);return Object(l.jsx)(Y,{name:q.CIRCLE,onClick:a,children:Object(l.jsx)("img",{src:ie,alt:"circle"})})}var se=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(oe)),ue=n.p+"static/media/line.71e38afd.svg";function le(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.LINE?t(V.noTool()):t(V.line())}),[n,t]);return Object(l.jsx)(Y,{name:q.LINE,onClick:a,children:Object(l.jsx)("img",{src:ue,alt:"line"})})}var be=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(le)),je=n.p+"static/media/hexagon.5fee026a.svg";function de(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.HEXAGON?t(V.noTool()):t(V.hexagon())}),[n,t]);return Object(l.jsx)(Y,{name:q.HEXAGON,onClick:a,children:Object(l.jsx)("img",{src:je,alt:"hexagon"})})}var Oe=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(de)),fe=n.p+"static/media/rectangle.19aa566b.svg";function me(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.RECTANGLE?t(V.noTool()):t(V.rectangle())}),[n,t]);return Object(l.jsx)(Y,{name:q.RECTANGLE,onClick:a,children:Object(l.jsx)("img",{src:fe,alt:"rectangle"})})}var he=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(me)),pe=n.p+"static/media/star.103f4316.svg";function ve(e){var t=e.dispatch,n=e.tool,a=Object(d.useCallback)((function(){n===q.STAR?t(V.noTool()):t(V.star())}),[n,t]);return Object(l.jsx)(Y,{name:q.STAR,onClick:a,children:Object(l.jsx)("img",{src:pe,alt:"star"})})}var Se=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,tool:t.tool}}))(O.a.memo(ve)),ge=(n(66),n.p+"static/media/points.ce4d7f60.svg");var Ee=Object(i.b)((function(e){var t=e.drawReducer;return{dispatch:t.dispatch,isShowedShapeBar:t.isShowedShapeBar}}))((function(e){var t=e.dispatch,n=e.isShowedShapeBar,a=Object(d.useCallback)((function(){t(n?V.hideShapeBar():V.showShapeBar())}),[n,t]);return Object(l.jsxs)("div",{className:"shape-bar",children:[Object(l.jsx)(Y,{name:"shape-bar",onClick:a,children:Object(l.jsx)("img",{src:ge,alt:""})}),n&&Object(l.jsxs)("ul",{className:"shape-bar__setting",children:[Object(l.jsx)("li",{className:"shape-bar__item",children:Object(l.jsx)(be,{})}),Object(l.jsx)("li",{className:"shape-bar__item",children:Object(l.jsx)(se,{})}),Object(l.jsx)("li",{className:"shape-bar__item",children:Object(l.jsx)(he,{})}),Object(l.jsx)("li",{className:"shape-bar__item",children:Object(l.jsx)(Se,{})}),Object(l.jsx)("li",{className:"shape-bar__item",children:Object(l.jsx)(Oe,{})})]})]})}));n(67);var xe=Object(i.b)((function(e){var t=e.drawReducer;return{isShowedSizeBar:t.isShowedSizeBar,size:t.size,dispatch:t.dispatch}}))((function(e){var t=e.isShowedSizeBar,n=e.size,a=e.dispatch,r=Object(d.useCallback)((function(){a(t?V.hideSizeBar():V.showSizeBar())}),[t,a]);return Object(l.jsxs)("div",{className:"size-bar",children:[Object(l.jsx)(Y,{name:"size-bar",onClick:r,children:"size"}),t&&Object(l.jsxs)("div",{className:"size-bar__setting",children:[Object(l.jsx)("input",{type:"range",name:"range",min:"1",max:"50",value:n,onChange:function(e){var t=e.target.value;a(V.setSize(t))}}),Object(l.jsx)("span",{children:n})]})]})}));n(68);function Re(){return Object(l.jsxs)("ul",{className:"drawbar",children:[Object(l.jsx)("li",{className:"drawbar__item",children:Object(l.jsx)(ce,{})}),Object(l.jsx)("li",{className:"drawbar__item",children:Object(l.jsx)(Ee,{})}),Object(l.jsx)("li",{className:"drawbar__item",children:Object(l.jsx)(xe,{})}),Object(l.jsx)("li",{className:"drawbar__item",children:Object(l.jsx)(ne,{})})]})}var Te=O.a.memo(Re),Ce={sendImg:function(e,t){return Ie.apply(this,arguments)},onImages:function(){return we.apply(this,arguments)}};function Ie(){return(Ie=Object(X.a)(W.a.mark((function e(t,n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.ref().child("images").push({image:t,email:n});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(X.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){w.ref().child("images").on("value",(function(t){var n=t.val();e(n||{})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e,Ne=n.p+"static/media/disk.4e36d248.svg";function Ae(e){var t=e.img,n=e.user,a=e.isClean,r=Object(d.useRef)(""),c=Object(d.useCallback)(Object(X.a)(W.a.mark((function e(){var c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.current===t.src||a){e.next=13;break}return e.prev=1,e.next=4,Ce.sendImg(t.src,n.email);case 4:y.b.info("image saved",{position:y.b.POSITION.TOP_CENTER}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),c=e.t0.message,y.b.error(c,{position:y.b.POSITION.TOP_CENTER});case 11:e.next=14;break;case 13:y.b.isActive(_e)||(_e=y.b.error("Error",{position:y.b.POSITION.TOP_CENTER}));case 14:r.current=t.src;case 15:case"end":return e.stop()}}),e,null,[[1,7]])}))),[a,t,n]);return Object(l.jsxs)("div",{children:[Object(l.jsx)(y.a,{}),Object(l.jsx)(Y,{onClick:c,children:Object(l.jsx)("img",{src:Ne,alt:""})})]})}y.b.configure();var ye=Object(i.b)((function(e){var t=e.drawReducer,n=t.img,a=t.isClean;return{img:n,user:e.authReducer.user,isClean:a}}))(O.a.memo(Ae)),Le=[],Pe={redraw:ke,addPoint:Be,clearFromPaintbrush:function(){Le.splice(0,Le.length)},clearCanvas:Ge,drawPoint:function(e,t,n,a,r,c){Be(t,n,!0,a,r),ke(e),He(e,c)},drawLine:function(e,t,n,a,r,c,i,o){ke(e),e.lineWidth=+t,e.strokeStyle=n,e.beginPath(),e.moveTo(a,r),e.lineTo(c,i),e.closePath(),e.stroke(),He(e,o)},drawCircle:function(e,t,n,a,r,c,i){var o=.5522848,s=a/2*o,u=r/2*o,l=t+a,b=n+r,j=t+a/2,d=n+r/2;ke(e),e.fillStyle=c,e.beginPath(),e.moveTo(t,d),e.bezierCurveTo(t,d-u,j-s,n,j,n),e.bezierCurveTo(j+s,n,l,d-u,l,d),e.bezierCurveTo(l,d+u,j+s,b,j,b),e.bezierCurveTo(j-s,b,t,d+u,t,d),e.closePath(),e.fill(),He(e,i)},drawRectangle:function(e,t,n,a,r,c,i){ke(e),e.fillStyle=c,e.beginPath(),e.fillRect(t,n,a,r),e.closePath(),He(e,i)},drawImage:He,createImg:function(e){var t=e.toDataURL("image/png"),n=new Image;return n.src=t,n},drawStar:function(e,t,n,a,r,c){var i=Math.PI/5,o=Math.PI/2*3,s=t,u=n;ke(e),e.fillStyle=r,e.beginPath(),e.moveTo(t,n-a),new Array(5).fill(null).forEach((function(){s=t+Math.cos(o)*a,u=n+Math.sin(o)*a,e.lineTo(s,u),o+=i,s=t+Math.cos(o)*(a/2),u=n+Math.sin(o)*(a/2),e.lineTo(s,u),o+=i})),e.lineTo(t,n-a),e.closePath(),e.fill(),He(e,c)},drawHexagon:function(e,t,n,a,r,c){var i=.523598776,o=Math.sin(i)*a,s=Math.cos(i)*a,u=2*s,l=a+2*o;ke(e),e.fillStyle=r,e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+u,n+o),e.lineTo(t+u,n+o+a),e.lineTo(t+s,n+l),e.lineTo(t,n+a+o),e.lineTo(t,n+o),e.closePath(),e.fill(),He(e,c)},createContext:function(e){var t=e.getContext("2d");t&&(t.globalCompositeOperation="destination-over");return t}};function ke(e){Ge(e),e.lineJoin="round",Le.forEach((function(t,n,a){e.beginPath(),t.drag&&n?e.moveTo(a[n-1].pointX,a[n-1].pointY):e.moveTo(t.pointX-1,t.pointY),e.lineTo(t.pointX,t.pointY),e.closePath(),e.strokeStyle=t.color,e.lineWidth=+t.size,e.stroke()}))}function Be(e,t,n,a,r){Le.push({pointX:e,pointY:t,drag:n,color:a,size:r})}function Ge(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)}function He(e,t){t&&e.drawImage(t,0,0)}n(69);var De=n.p+"static/media/trash.2d44fa45.svg";function ze(e){var t=e.context,n=e.dispatch,a=Object(d.useCallback)((function(){n(V.deleteImg()),t&&(Pe.clearCanvas(t),n(V.clear()))}),[n,t]);return Object(l.jsxs)("div",{className:"paint-toolbar",children:[Object(l.jsx)(ee,{}),Object(l.jsx)(Te,{}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"clear-btn",children:Object(l.jsx)(Y,{onClick:a,children:Object(l.jsx)("img",{src:De,alt:""})})}),Object(l.jsx)(ye,{})]})]})}var Me=Object(i.b)((function(e){var t=e.drawReducer;return{context:t.context,dispatch:t.dispatch}}))(O.a.memo(ze));n(70);var Ue=Object(i.b)((function(e){var t=e.drawReducer;return{tool:t.tool,isDraw:t.isDraw,color:t.color,dispatch:t.dispatch,size:t.size,img:t.img,context:t.context}}))((function(e){var t=e.tool,n=e.isDraw,a=e.color,r=e.size,c=e.dispatch,i=e.img,o=e.context,s=Object(d.useRef)(null),u=Object(d.useRef)(null),b=Object(d.useRef)(0),j=Object(d.useRef)(0),O=Object(d.useCallback)((function(){s&&s.current&&c(V.setImg(Pe.createImg(s.current))),Pe.clearFromPaintbrush(),c(V.stopDraw())}),[c]),f=Object(d.useCallback)((function(){s&&s.current&&u&&u.current&&(s.current.width=u.current.clientWidth,s.current.height=u.current.clientHeight,c(V.setContext(Pe.createContext(s.current))))}),[c]);return Object(d.useEffect)((function(){return s&&s.current&&(s.current.height=window.innerHeight,window.innerWidth<712&&(s.current.width=window.innerWidth-50),c(V.setContext(Pe.createContext(s.current)))),window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[c,f]),Object(d.useEffect)((function(){return document.addEventListener("mouseup",O),function(){return document.removeEventListener("mouseup",O)}}),[O]),Object(l.jsx)("div",{className:"mainview",ref:u,children:Object(l.jsx)("canvas",{className:"mainview__canvas",id:"mainview",ref:s,width:712,height:632,onMouseDown:function(e){var n=e.clientX,u=e.clientY;if(c(V.hideSizeBar()),c(V.hideShapeBar()),s&&s.current&&o&&t){c(V.startDraw());var l=n-s.current.offsetLeft,d=u-s.current.offsetTop;t===q.PAINTBRUSH?Pe.drawPoint(o,l,d,a,r,i):(b.current=l,j.current=d)}},onMouseMove:function(e){var c=e.clientX,u=e.clientY;if(s&&s.current&&o){var l=c-s.current.offsetLeft,d=u-s.current.offsetTop,O=l-b.current,f=d-j.current;if(n&&t===q.PAINTBRUSH)Pe.drawPoint(o,l,d,a,r,i);else if(n&&t===q.LINE)Pe.drawLine(o,r,a,b.current,j.current,l,d,i);else if(n&&t===q.CIRCLE)Pe.drawCircle(o,b.current,j.current,O,f,a,i);else if(n&&t===q.RECTANGLE)Pe.drawRectangle(o,b.current,j.current,O,f,a,i);else if(n&&t===q.STAR){var m=O+f;Pe.drawStar(o,b.current,j.current,m,a,i)}else n&&t===q.HEXAGON&&Pe.drawHexagon(o,b.current,j.current,O,a,i)}},onMouseUp:O,onMouseLeave:function(){t===q.PAINTBRUSH&&s&&s.current&&(c(V.setImg(Pe.createImg(s.current))),Pe.clearFromPaintbrush())}})})}));function We(){return Object(l.jsxs)("div",{className:"paint",children:[Object(l.jsx)(Ue,{}),Object(l.jsx)(Me,{})]})}var Xe,Ze=O.a.memo(We),Ye=n(35);!function(e){e.SUCCESS_DOWNLOAD="SUCCESS_DOWNLOAD",e.FILTER_IMAGES="FILTER_IMAGES",e.SET_IMAGES="SET_IMAGES"}(Xe||(Xe={}));var Ke={getImages:function(){return function(e){Ce.onImages().then((function(t){e(function(e){return{type:Xe.SUCCESS_DOWNLOAD,payload:e}}(t))}))}},filterImages:function(e){return{type:Xe.FILTER_IMAGES,payload:e}},setImages:function(e){return{type:Xe.SET_IMAGES,payload:e}}};n(71);function Fe(e){var t=e.images,n=e.filtredKey,a=Object(i.c)(),r=Object(d.useMemo)((function(){return function(e,t){var n=Object.values(e);return"all"!==t&&(n=n.filter((function(e){return e.email===t}))),n.map((function(e,t,n){return Object(l.jsx)("li",{className:"gallery-list__item",id:t===n.length-1?"last":void 0,children:Object(l.jsx)("img",{src:e.image,alt:""})},e.image)}))}(t,n)}),[t,n]);return Object(d.useEffect)((function(){a(Ke.getImages())}),[a]),Object(d.useEffect)((function(){var e=document.querySelector("#last");e&&Object(Ye.a)(e,{block:"center",inline:"center"})})),Object(l.jsx)("ul",{className:"gallery-list",children:r})}var Qe=Object(i.b)((function(e){var t=e.showReducer;return{images:t.images,filtredKey:t.filtredKey}}))(O.a.memo(Fe)),qe=(n(72),n(15)),Je={loading:!1,user:null};var Ve={tool:null,isDraw:!1,color:"#000",isShowedSizeBar:!1,size:"5",isShowedShapeBar:!1,img:null,context:null,isClean:!0};var $e={images:{},filtredImages:{},filtredKey:"all"};var et=Object(qe.c)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.REQUEST:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case E.SUCCESS:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload});case E.ERROR:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case E.SIGNOUT:return Je;default:return e}},drawReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.NO_TOOL:return Object(s.a)(Object(s.a)({},e),{},{tool:null});case q.PAINTBRUSH:return Object(s.a)(Object(s.a)({},e),{},{tool:q.PAINTBRUSH});case q.LINE:return Object(s.a)(Object(s.a)({},e),{},{tool:q.LINE});case q.RECTANGLE:return Object(s.a)(Object(s.a)({},e),{},{tool:q.RECTANGLE});case q.CIRCLE:return Object(s.a)(Object(s.a)({},e),{},{tool:q.CIRCLE});case q.STAR:return Object(s.a)(Object(s.a)({},e),{},{tool:q.STAR});case q.HEXAGON:return Object(s.a)(Object(s.a)({},e),{},{tool:q.HEXAGON});case q.START_DRAW:return Object(s.a)(Object(s.a)({},e),{},{isDraw:!0,isClean:!1});case q.STOP_DRAW:return Object(s.a)(Object(s.a)({},e),{},{isDraw:!1});case q.SET_COLOR:return Object(s.a)(Object(s.a)({},e),{},{color:t.payload});case q.SHOW_SIZE_BAR:return Object(s.a)(Object(s.a)({},e),{},{isShowedSizeBar:!0});case q.HIDE_SIZE_BAR:return Object(s.a)(Object(s.a)({},e),{},{isShowedSizeBar:!1});case q.SET_SIZE:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});case q.SHOW_SHAPE_BAR:return Object(s.a)(Object(s.a)({},e),{},{isShowedShapeBar:!0});case q.HIDE_SHAPE_BAR:return Object(s.a)(Object(s.a)({},e),{},{isShowedShapeBar:!1});case q.SET_IMG:return Object(s.a)(Object(s.a)({},e),{},{img:t.payload});case q.DELETE_IMG:return Object(s.a)(Object(s.a)({},e),{},{img:null});case q.SET_CONTEXT:return Object(s.a)(Object(s.a)({},e),{},{context:t.payload});case q.CLEAR:return Object(s.a)(Object(s.a)({},e),{},{isClean:!0});default:return e}},showReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe.SUCCESS_DOWNLOAD:return Object(s.a)(Object(s.a)({},e),{},{images:Object(s.a)({},t.payload)});case Xe.FILTER_IMAGES:return Object(s.a)(Object(s.a)({},e),{},{filtredKey:t.payload});case Xe.SET_IMAGES:return Object(s.a)(Object(s.a)({},e),{},{filtredImages:Object(s.a)({},t.payload)});default:return e}}}),tt=n(33),nt=Object(qe.d)(et,Object(qe.a)(tt.a));n(73);function at(e){var t=e.filtredKey,n=e.images,a=Object(d.useMemo)((function(){return function(e){var t=Object.values(e).map((function(e){return e.email}));return t.push("all"),Array.from(new Set(t)).map((function(e){return Object(l.jsx)("option",{value:e,children:e},e)}))}(n)}),[n]);return Object(l.jsx)("select",{className:"filter",value:t,onChange:function(e){var t=e.target.value;nt.dispatch(Ke.filterImages(t))},children:a})}var rt=Object(i.b)((function(e){var t=e.showReducer;return{filtredKey:t.filtredKey,images:t.images}}))(O.a.memo(at));function ct(){var e=Object(d.useCallback)((function(){T.push(a.PAINT)}),[]);return Object(l.jsxs)("div",{className:"gallery-toolbar",children:[Object(l.jsx)(J,{}),Object(l.jsx)(rt,{}),Object(l.jsx)(Y,{onClick:e,children:Object(l.jsx)("img",{src:ae,alt:""})})]})}var it=O.a.memo(ct);n(74);function ot(){return Object(l.jsxs)("div",{className:"gallery",children:[Object(l.jsx)(it,{}),Object(l.jsx)(Qe,{})]})}var st=O.a.memo(ot);var ut=function(){return Object(l.jsx)("div",{className:"main",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)(o.c,{history:T,children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(b,{exact:!0,path:a.GALLERY,component:st}),Object(l.jsx)(b,{path:a.PAINT,component:Ze}),Object(l.jsx)(o.b,{path:a.SIGNIN,component:D}),Object(l.jsx)(o.b,{path:a.REGISTER,component:M})]})})})})};c.a.render(Object(l.jsx)(i.a,{store:nt,children:Object(l.jsx)(ut,{})}),document.querySelector("#root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.b5b99f1a.chunk.js.map